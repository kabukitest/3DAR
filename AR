<?php
// モデルリストを定義
$models = [
    1 => [
        "path" => "models/ATAT.glb", // GLBファイルのパス
        "marker" => "markers/pattern-ATAT.patt", // PATTファイルのパス
        "scale" => "0.3 0.3 0.3", // モデルのスケール
        "position" => "0 1 0", // モデルの位置
        "rotation" => "0 0 0" // モデルの回転
    ]
];

// `id`パラメータからモデルを選択
$id = isset($_GET['id']) ? intval($_GET['id']) : 1;

// モデルが存在しない場合はデフォルトモデルを選択
$model = $models[$id] ?? $models[1];
?>
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR Display</title>

    <!-- A-Frameライブラリ -->
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <!-- AR.jsライブラリ -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
</head>
<body>
    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;" vr-mode-ui="enabled: false;">
        <a-assets>
            <!-- モデルの読み込み -->
            <a-asset-item id="model" src="<?php echo htmlspecialchars($model['path']); ?>"></a-asset-item>
        </a-assets>

        <!-- マーカーとモデル -->
        <a-marker preset="custom" type="pattern" url="<?php echo htmlspecialchars($model['marker']); ?>">
            <a-entity gltf-model="#model" 
                      position="<?php echo htmlspecialchars($model['position']); ?>" 
                      rotation="<?php echo htmlspecialchars($model['rotation']); ?>" 
                      scale="<?php echo htmlspecialchars($model['scale']); ?>">
            </a-entity>
        </a-marker>

        <a-entity camera></a-entity>
    </a-scene>
</body>
</html>
